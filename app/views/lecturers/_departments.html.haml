%table.table.table-bordered
  = hidden_field_tag "lecturer[department_ids][]", nil # default empty array in case nothing will be checked
  - departments.in_groups_of(3, false) do |departments_row|
    %tr
      - departments_row.each do |department|
        %td
          = check_box_tag("lecturer[department_ids][]", department.id,
                 lecturer.department_ids.include?(department.id))
          = department.title
